<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="assets/img/favicon.png">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Login</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

	<!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/material-kit.css" rel="stylesheet"/>
	<script src="js/jquery.js"></script>
	<script src="js/index.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/bootstrap.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<style>
		/* fallback */
		@font-face {
		  font-family: 'Material Icons';
		  font-style: normal;
		  font-weight: 400;
		  src: url(fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format('woff2');
		}

		.material-icons {
		  font-family: 'Material Icons';
		  font-weight: normal;
		  font-style: normal;
		  font-size: 24px;
		  line-height: 1;
		  letter-spacing: normal;
		  text-transform: none;
		  display: inline-block;
		  white-space: nowrap;
		  word-wrap: normal;
		  direction: ltr;
		  -moz-font-feature-settings: 'liga';
		  -moz-osx-font-smoothing: grayscale;
		}
		#status{
			display: inline-block;
			padding: 0.5rem;
			border-radius: 5px;
			margin: 1rem;
			position: relative;
			top: -35px;
			left: 100px;
			font-size:12px;
			color: white;
		}
		
		.video-fluid {
			width: 100%;
			height: auto;
		}
		
		.signup-page .card-signup {
			margin:0px !important;
		}
	</style>
</head>

<body class="signup-page">
	        	<!--<nav class="navbar navbar-transparent navbar-absolute" style = 'display' >
    	<div class="container">
 Brand and toggle get grouped for better mobile display 
        	<div class="navbar-header">
        		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example">
            		<span class="sr-only">Toggle navigation</span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
        		</button>
        		<a name="">
					<div class="logo-container">
						<div class="logo" style = 'border:none;border-radius:none;'>
							<img src="img/logoss.png" style = 'width:100px;'  alt="logo empresa" rel="tooltip" title="sistema de ingreso de tickets" data-placement="bottom" data-html="true">
						</div>
						<div class="brand">
							 
							<p id="status" onclick = "detectarConexion()" ></p>
							
						</div>


					</div>
				</a>
        	</div>

        	<div class="collapse navbar-collapse" id="navigation-example">
        		
        	</div>
    	</div>
    </nav>-->

    <div class="wrapper">
		<div class="header header-filter" style="background-image: url('assets/img/city.jpg'); background-size: cover; background-position: top center;">
			<div class="container">
				<div class="row">
					<div class="col-md-10" id = 'divVideo'><br><br>
						<video id = 'mi-video' class="video-fluid z-depth-1 card card-signup" width="100%" height="100%" autoplay="autoplay" controls  >
							<source src="https://mdbootstrap.com/img/video/Sail-Away.mp4" type="video/mp4" />
						</video>
					</div>
					<div class="col-md-2"><br><br>
						<div class="card card-signup">
							<form class="form" method="" action="">
								
								<div class="content" id = 'contieneLista' >
									<div class="input-group">
										<span class="input-group-addon">
											<i class="material-icons">assignment</i>
											<input type = 'hidden' id = 'detectorInternet'  />
										</span>
										<input type="number" class="form-control" placeholder="# Evento ej : 118" id = 'id_con'/>
									</div>
									
									<div class="input-group">
										<span class="input-group-addon">
											<i class="material-icons">lock_outline</i>
										</span>
										<input type="number" placeholder="Clave del Evento" class="form-control" id = 'claveEvento'/>
									</div>
									
									
									<div class="input-group">
										<span class="input-group-addon">
											<i class="material-icons">face</i>
										</span>
										<input type="text" placeholder="EMPLEADO" class="form-control" id = 'empleado'/>
									</div>
									
									
									<div class="input-group">
										<span class="input-group-addon">
											<i class="material-icons">vpn_key</i>
										</span>
										<select class = 'form-control' id = 'tipo_acceso'  >
											<option value = '' >Seleccione...</option>
											<option value = 'cajero' >Cajero</option>
											<option value = 'lectora' >Accesos</option>
										</select>
									</div>
									

									<!-- If you want to add a checkbox to this form, uncomment this code

									<div class="checkbox">
										<label>
											<input type="checkbox" name="optionsCheckboxes" checked>
											Subscribe to newsletter
										</label>
									</div> -->
								</div>
								
							</form>
						</div>
					</div>
				</div>
			</div>

		</div>

    </div>


</body>
		<script>
			
			function getParameterByName(name) {
				name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
				var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
				results = regex.exec(location.search);
				return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}
			
			$(document).ready(function(){
				
				
				$("#mi-video").on('ended', function(){
					var id_video = getParameterByName('id_video');
					var siguiente = (parseInt(id_video) + parseInt(1));
					window.location = '?id_video='+siguiente;
				});
			});
			
			
			construyeListado();
			function construyeListado(){ 
				
				var db = window.openDatabase("Database", "1.0", "TicketMobile", 200000);
				db.transaction(function(tx){
					tx.executeSql("SELECT * FROM video",[],function(tx,results){
						var registros = results.rows.length;
						var datos = '<table class = "table table-border table-condensed">';
						for(var i = 0; i < registros; i++){
							
							var row = results.rows.item(i);
							
							var id = row.strBarcode;
							var id_video = row.id_video;
							var nombre = row.nombre;
							var ruta = row.ruta;
							var icono = row.icono;
							
							datos +='<tr><td onclick = "irVideo('+id_video+')" >'+nombre+'</td></tr>';
						}
						datos +='</table>';
						$('#contieneLista').html(datos);
						
					});
						
				},errorCB,successCB);
			}
			function irVideo(id_video){
				window.location = '?id_video='+id_video;
			}
			
			var id_video = getParameterByName('id_video');
			
			if(id_video > 0 ){
				colocavideo();
			}
			function colocavideo(){
				var id_video = getParameterByName('id_video');
				<!-- alert(id_video) -->
				var db = window.openDatabase("Database", "1.0", "TicketMobile", 200000);
				db.transaction(function(tx){
					tx.executeSql("SELECT * FROM video where id_video = ? ;",[id_video],function(tx,results){
						var registros = results.rows.length;
						
						for(var i = 0; i < registros; i++){
							
							var row = results.rows.item(i);
							
							var id = row.strBarcode;
							var id_video = row.id_video;
							var nombre = row.nombre;
							var ruta = row.ruta;
							var icono = row.icono;
							<!-- alert(ruta) -->
							$('#divVideo').html('\
								<br><br><video id = "mi-video" class="video-fluid z-depth-1 card card-signup" width="100%" height="100%" autoplay="autoplay" controls  >\
									<source src="'+ruta+'" type="video/mp4" />\
								</video>\
							');
						}
						
						
						
					});
						
				},errorCB,successCB);
			}
		</script>
	<!--   Core JS Files   -->
	<script src="assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/material.min.js"></script>

	<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
	<script src="assets/js/nouislider.min.js" type="text/javascript"></script>

	<!--  Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
	<script src="assets/js/bootstrap-datepicker.js" type="text/javascript"></script>

	<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
	<script src="assets/js/material-kit.js" type="text/javascript"></script>

</html>
